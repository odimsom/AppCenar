<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AppCenar</title>
      <style>
        /* Custom styles for backdrop-blur on inputs if Tailwind's utility isn't enough */
        .input-backdrop-blur {
            backdrop-filter: blur(4px); /* Adjust blur strength as needed */
            background-color: rgba(58, 58, 58, 0.5); /* kuretake/50 */
        }
    </style>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            petrel: '#3c78b4',
            benthic: '#000014',
            bluedart: '#3c78a0',
            kuretake: '#001428',
            mississippi: '#3c648c',
          }
        }
      }
    }
  </script>
  <!-- Heroicons CDN -->
  <link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css">
</head>
<body class="bg-kuretake min-h-screen">
  <div class="flex min-h-screen">
    <% if (user) { %>
      <!-- Sidebar para usuarios logueados -->
      <aside class="w-64 bg-benthic text-white flex flex-col py-6 px-4">
        <a href="/" class="flex items-center mb-8 gap-2">
          <i class="fas fa-utensils text-petrel text-2xl"></i>
          <span class="text-2xl font-bold tracking-wide">AppCenar</span>
        </a>
        <nav class="flex-1">
          <ul class="space-y-2">
            <% if (user.rol === 'cliente') { %>
              <li>
                <a href="/cliente/home" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-home text-petrel"></i>
                  <span>Home</span>
                </a>
              </li>
              <li>
                <a href="/cliente/perfil" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-user text-petrel"></i>
                  <span>Mi perfil</span>
                </a>
              </li>
              <li>
                <a href="/cliente/pedidos" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-shopping-bag text-petrel"></i>
                  <span>Mis pedidos</span>
                </a>
              </li>
              <li>
                <a href="/cliente/direcciones" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-map-marker-alt text-petrel"></i>
                  <span>Mis direcciones</span>
                </a>
              </li>
              <li>
                <a href="/cliente/carrito" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-card text-petrel"></i>
                  <span>Carrito</span>
                </a>
              </li>
              <li>
                <a href="/cliente/favoritos" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-heart text-petrel"></i>
                  <span>Mis favoritos</span>
                </a>
              </li>
            <% } else if (user.rol === 'comercio') { %>
              <li>
                <a href="/comercio/home" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-home text-petrel"></i>
                  <span>Home</span>
                </a>
              </li>
              <li>
                <a href="/comercio/perfil" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-store text-petrel"></i>
                  <span>Perfil del comercio</span>
                </a>
              </li>
              <li>
                <a href="/comercio/categorias" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-tags text-petrel"></i>
                  <span>Categorías</span>
                </a>
              </li>
              <li>
                <a href="/comercio/productos" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-box text-petrel"></i>
                  <span>Productos</span>
                </a>
              </li>
            <% } else if (user.rol === 'delivery') { %>
              <li>
                <a href="/delivery/home" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-home text-petrel"></i>
                  <span>Home</span>
                </a>
              </li>
              <li>
                <a href="/delivery/perfil" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-user text-petrel"></i>
                  <span>Mi perfil</span>
                </a>
              </li>
            <% } else if (user.rol === 'admin') { %>
              <li>
                <a href="/admin/home" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-tachometer-alt text-petrel"></i>
                  <span>Dashboard</span>
                </a>
              </li>
              <li>
                <a href="/admin/clientes" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-users text-petrel"></i>
                  <span>Clientes</span>
                </a>
              </li>
              <li>
                <a href="/admin/deliveries" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-motorcycle text-petrel"></i>
                  <span>Deliveries</span>
                </a>
              </li>
              <li>
                <a href="/admin/comercios" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-store text-petrel"></i>
                  <span>Comercios</span>
                </a>
              </li>
              <li>
                <a href="/admin/configuracion" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-cog text-petrel"></i>
                  <span>Configuración</span>
                </a>
              </li>
              <li>
                <a href="/admin/administradores" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-user-shield text-petrel"></i>
                  <span>Administradores</span>
                </a>
              </li>
              <li>
                <a href="/admin/tipos-comercios" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-petrel transition">
                  <i class="fas fa-store-alt text-petrel"></i>
                  <span>Tipos de comercios</span>
                </a>
              </li>
            <% } %>
            <li>
              <a href="/auth/logout" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-600 transition">
                <i class="fas fa-sign-out-alt text-red-400"></i>
                <span>Cerrar sesión</span>
              </a>
            </li>
          </ul>
        </nav>
      </aside>
      <main class="flex-1 bg-kuretake p-8">
    <% } else { %>
      <main class="flex-1 bg-kuretake p-8">
    <% } %>
      <!-- Mensajes flash -->
      <% if(success_msg && success_msg.length > 0) { %>
        <div class="mb-4">
          <div class="flex items-center bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
            <i class="fas fa-check-circle mr-2 text-green-500"></i>
            <span class="block flex-1"><%= success_msg %></span>
            <button type="button" class="ml-4 text-green-700 hover:text-green-900" onclick="this.parentElement.style.display='none'">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
      <% } %>
      <% if(error_msg && error_msg.length > 0) { %>
        <div class="mb-4">
          <div class="flex items-center bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
            <i class="fas fa-exclamation-circle mr-2 text-red-500"></i>
            <span class="block flex-1"><%= error_msg %></span>
            <button type="button" class="ml-4 text-red-700 hover:text-red-900" onclick="this.parentElement.style.display='none'">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
      <% } %>
      <!-- Contenido principal -->
      <div class="bg-kuretake rounded-lg shadow-lg p-6 min-h-[60vh] text-white">
        <%- body %>
      </div>
    </main>
  </div>
</body>
</html>
