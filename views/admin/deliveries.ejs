<div class="container mx-auto mt-6 px-4">
  <h1 class="text-3xl font-bold mb-6 text-petrel">Listado de Deliveries</h1>

  <% if (deliveries.length === 0) { %>
  <div
    class="bg-yellow-500 bg-opacity-30 border border-yellow-400 text-yellow-200 px-4 py-3 rounded mb-6"
    role="alert"
  >
    No hay deliveries registrados.
  </div>
  <% } else { %>
  <div class="overflow-x-auto rounded-lg shadow-lg">
    <table
      class="min-w-full border border-benthic bg-benthic text-white rounded-lg"
    >
      <thead>
        <tr class="bg-petrel bg-opacity-80 text-white">
          <th class="py-3 px-6 text-left">#</th>
          <th class="py-3 px-6 text-left">Nombre</th>
          <th class="py-3 px-6 text-left">Correo</th>
          <th class="py-3 px-6 text-left">Estado</th>
          <th class="py-3 px-6 text-left">Pedidos</th>
          <th class="py-3 px-6 text-left">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <% deliveries.forEach((delivery, index) => { %>
        <tr class="border-b border-kuretake hover:bg-kuretake/80 transition">
          <td class="py-4 px-6"><%= index + 1 %></td>
          <td class="py-4 px-6">
            <%= delivery.nombre %> <%= delivery.apellido %>
          </td>
          <td class="py-4 px-6 break-words"><%= delivery.correo %></td>
          <td class="py-4 px-6">
            <% if (delivery.activo) { %>
            <span
              class="inline-block bg-green-600 text-green-200 text-xs font-semibold px-2 py-1 rounded-full"
              >Activo</span
            >
            <% } else { %>
            <span
              class="inline-block bg-red-600 text-red-200 text-xs font-semibold px-2 py-1 rounded-full"
              >Inactivo</span
            >
            <% } %>
          </td>
          <td class="py-4 px-6">
            <%= delivery.pedidosDelivery.length %> pedidos
          </td>
          <td class="py-4 px-6">
            <a
              href="/admin/deliveries/cambiar-estado/<%= delivery.id %>"
              class="inline-block px-3 py-1 rounded-md font-semibold text-sm <%= delivery.activo ? 'bg-red-700 hover:bg-red-800 text-white' : 'bg-green-700 hover:bg-green-800 text-white' %> transition"
            >
              <%= delivery.activo ? 'Desactivar' : 'Activar' %>
            </a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
  <% } %>

  <a
    href="/admin/home"
    class="inline-block mt-6 px-5 py-2 bg-petrel hover:bg-mississippi text-white rounded-lg shadow transition"
  >
    <i class="fa fa-arrow-left mr-2"></i> Volver
  </a>
</div>
